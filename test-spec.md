# テスト仕様書: Flask + OpenRouter AI チャットアプリ

## 1. テスト対象
- `app.py`（Flaskサーバー/APIバックエンド）
- `static/index.html`（フロントエンドUI）

## 2. テスト環境
- Windows 10/11
- Python 3.8以降
- Flask, openai, python-dotenv
- OpenRouter APIキー設定済み
- ブラウザ: Chrome, Edge, Firefox

## 3. テスト項目

### 3.1. サーバー起動・静的ファイル配信
| No | テスト内容 | 手順 | 期待結果 |
|----|------------|------|----------|
| 1  | サーバー起動 | `python app.py`で起動 | エラーなく起動し、`http://localhost:5000/`でアクセス可能 |
| 2  | index.html配信 | ブラウザで`/`にアクセス | Vue.js UIが表示される |

### 3.2. /send_api API 正常系
| No | テスト内容 | 手順 | 期待結果 |
|----|------------|------|----------|
| 3  | テキスト送信 | テキストを入力し「実行」 | AIから140字以内の応答が返る |
| 4  | context指定 | テキストとcontextを送信 | contextに沿った応答が返る |
| 5  | 関西弁ボタン | 「関西弁で実行」ボタン | 関西弁で親しみやすい応答が返る |

### 3.3. /send_api API 異常系
| No | テスト内容 | 手順 | 期待結果 |
|----|------------|------|----------|
| 6  | 空文字送信 | テキスト欄を空で送信 | エラー: Input text cannot be empty |
| 7  | textフィールドなし | text無しでAPI送信 | エラー: Missing 'text' in request body |
| 8  | APIキー未設定 | OPENROUTER_API_KEY未設定で起動 | エラー: OpenRouter API key is not configured on the server. |
| 9  | AI応答なし | AIから応答がない場合 | "AIから有効な応答がありませんでした。"が返る |
| 10 | 通信エラー | OpenRouter API通信不可 | エラー: AIサービスとの通信中にエラーが発生しました。 |

### 3.4. UIテスト
| No | テスト内容 | 手順 | 期待結果 |
|----|------------|------|----------|
| 11 | 結果表示 | 応答が正常時 | 結果欄にAI応答が表示される |
| 12 | エラー表示 | エラー発生時 | 結果欄に"エラー: ..."が表示される |

## 4. その他
- 入力最大長、応答最大長の確認
- 日本語以外の入力対応
- レスポンス速度の目安計測

---
